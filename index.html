<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Word Parts: Zombie Survival üßü‚Äç‚ôÇÔ∏è</title>
  <meta name="description" content="Drag prefixes, roots, and suffixes to build words while a zombie horde chases you. Survive waves, score points, and beat your high score!"/>
  <style>
    :root{
      --bg:#0b0f12; --panel:#0f171c; --ink:#eaf4ef; --muted:#9ab5a6; --accent:#78ffb3; --accent2:#9dffea; --danger:#ff6b6b; --warn:#ffd166; --shadow:rgba(0,0,0,.35);
      --outline:#23413a; --card:#101921; --slot:#132520; --chip:#162b23; --track:#0e1a15; --brand:#7c9cff;
      --radius:18px;
    }
    *{box-sizing:border-box} html,body{height:100%}
    body{margin:0;background:radial-gradient(1400px 800px at 10% -10%, #0f1b16 0%, #0b0f12 60%), var(--bg);color:var(--ink);font:16px/1.55 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial}
    .container{max-width:1100px;margin:0 auto;padding:24px}
    header{display:flex;align-items:center;justify-content:space-between;gap:14px;margin-bottom:10px}
    .brand{display:flex;gap:12px;align-items:center}
    .logo{width:44px;height:44px;border-radius:12px;background:conic-gradient(from 200deg at 70% 20%, #92ffb7, #36ff9b, #00d37a, #00b16a);display:grid;place-items:center;color:#072015;font-weight:900;box-shadow:0 6px 24px var(--shadow)}
    h1{margin:0;font-size:clamp(20px,4.5vw,30px)}
    .tag{color:#bcd3c7;font-size:12px}

    .hud{display:grid;grid-template-columns:1.25fr .75fr;gap:16px}
    @media (max-width:940px){.hud{grid-template-columns:1fr}}
    .card{background:linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.0));border:1px solid var(--outline);border-radius:var(--radius);padding:18px;box-shadow:0 12px 30px var(--shadow)}
    .row{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
    .pill{display:inline-flex;gap:8px;align-items:center;padding:6px 10px;border-radius:999px;background:#0e201a;border:1px solid #204036;color:#bde9d2;font-size:12px}
    .muted{color:#9ab5a6} .small{font-size:12px}

    .status{display:flex;justify-content:space-between;align-items:center}
    .hearts{display:flex;gap:8px}
    .heart{width:22px;height:22px;border-radius:6px;background:radial-gradient(10px 10px at 40% 40%, #ffb0b0, #ff6b6b);box-shadow:0 0 16px rgba(255,107,107,.25)}
    .heart.dead{background:#2c1a1a;border:1px solid #472b2b;box-shadow:none}

    .meter{height:10px;background:var(--track);border:1px solid var(--outline);border-radius:999px;overflow:hidden}
    .bar{height:100%;width:0;background:linear-gradient(90deg,#78ffb3,#9dffea)}

    /* NEW: Zombie chase track where zombies approach you */
    .chase{position:relative;height:52px;border:1px solid var(--outline);background:linear-gradient(180deg,#0c1713,#0a1410);border-radius:14px;overflow:hidden;margin:12px 0}
    .chase .lane{position:absolute;inset:0;opacity:.25;background-image:repeating-linear-gradient(90deg,transparent 0 48px, rgba(120,255,179,.05) 48px 52px)}
    .you-avatar, .zombie-avatar{position:absolute;top:50%;transform:translateY(-50%);display:flex;align-items:center;gap:6px;padding:6px 10px;border-radius:999px}
    .you-avatar{left:8px;background:linear-gradient(90deg,#78ffb3,#9dffea);color:#052315;font-weight:700}
    .zombie-avatar{right:8px;background:linear-gradient(135deg,#2a3e35,#20352c);color:#c8f1e1;border:1px solid #244736}
    .distance{position:absolute;bottom:4px;left:0;right:0;text-align:center;font-size:11px;color:#b9d8c9;opacity:.9}
    .horde{position:absolute;top:6px;bottom:6px;right:8px;display:flex;gap:4px;transition:transform .12s ease-out}
    .z{width:28px;height:28px;border-radius:8px;display:grid;place-items:center;background:radial-gradient(10px 10px at 40% 40%, #a1ff99, #6fd16a);box-shadow:0 0 12px rgba(140,255,122,.25)}

    .question{display:grid;gap:6px;margin-top:8px}
    .q-text{font-size:clamp(22px,4.5vw,30px);font-weight:900}
    .slots{display:flex;gap:8px;flex-wrap:wrap;min-height:46px;padding:10px;border-radius:14px;border:2px dashed #2a4b3e;background:#0d1b15}
    .slot{min-width:84px;padding:10px 12px;border-radius:999px;border:1px dashed #356554;color:#bfead5;text-align:center}
    .slot.filled{border-style:solid;background:#12281f}
    .chips{display:flex;gap:8px;flex-wrap:wrap}
    .chip{padding:8px 12px;border-radius:999px;background:var(--chip);border:1px solid #244736;cursor:grab;transition:.1s}
    .chip:active{transform:scale(.96)}

    .controls{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
    button{appearance:none;padding:10px 14px;border-radius:12px;border:1px solid #23413a;background:linear-gradient(180deg,#122920,#0f201a);color:var(--ink);cursor:pointer}
    button.primary{background:linear-gradient(135deg,#1a5a45,#154a38)}
    button.good{background:linear-gradient(135deg,#2a6a4e,#1d4d39)}
    button.bad{background:linear-gradient(135deg,#6a2a2a,#4d1d1d)}
    .toast{margin-top:8px;font-weight:600}

    footer{margin-top:18px;color:#95b5a6}
    code.kbd{background:#0c1612;border:1px solid #1f3a30;border-radius:6px;padding:2px 6px}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="brand">
        <div class="logo">üßü‚Äç‚ôÇÔ∏è</div>
        <div>
          <h1>Word Parts: Zombie Survival</h1>
          <div class="tag">Build the cure with prefixes, roots, and suffixes before the horde catches you.</div>
        </div>
      </div>
      <div class="row">
        <span class="pill">Survival</span>
        <span class="pill">Waves ‚Ä¢ Hearts ‚Ä¢ High Score</span>
      </div>
    </header>

    <div class="hud">
      <section class="card">
        <div class="status">
          <div class="row">
            <span class="pill">Wave <b id="wave">1</b></span>
            <span class="pill">Score: <b id="score">0</b></span>
            <span class="pill">Best: <b id="best">0</b></span>
          </div>
          <div class="hearts" id="hearts"></div>
        </div>

        <!-- NEW CHASE BAR -->
        <div class="chase" aria-label="zombies are chasing you">
          <div class="lane"></div>
          <div class="you-avatar">üß™ You</div>
          <div class="horde" id="horde">
            <div class="z">üßü</div><div class="z">üßü‚Äç‚ôÄÔ∏è</div><div class="z">üßü‚Äç‚ôÇÔ∏è</div>
          </div>
          <div class="zombie-avatar" id="zLabel">Horde</div>
          <div class="distance" id="distText">Distance: 60%</div>
        </div>

        <div class="meter" aria-label="round timer"><div class="bar" id="timebar"></div></div>

        <div class="question">
          <div class="q-text">Form a word that means: <em id="meaning">‚Äústudy of life‚Äù</em></div>
          <div class="muted small" id="hint">Hint: root + suffix</div>
        </div>

        <div class="slots" id="slots" aria-label="slots"></div>
        <div class="chips" id="chips" aria-label="parts to drag"></div>

        <div class="controls">
          <button class="primary" id="btnStart">Start</button>
          <button class="good" id="btnCheck">Check</button>
          <button id="btnReveal">Reveal</button>
          <button id="btnNew">New Puzzle</button>
        </div>
        <div class="toast" id="toast"></div>
      </section>

      <aside class="card">
        <div class="row" style="justify-content:space-between">
          <span class="pill">How to play</span>
          <span class="small muted">Dataset: <span id="datasetName">Core Pack (~60)</span></span>
        </div>
        <ol class="small" style="margin-top:8px;color:#b8d8c8">
          <li>Drag parts into slots to form the word that matches the meaning.</li>
          <li>The <b>horde</b> actually <em>moves toward you</em>. Correct answers push them back; wrong answers/timeout make them surge forward.</li>
          <li>Clear <b>5 puzzles</b> to advance a wave. Higher waves = faster horde.</li>
          <li>You have <b>3 hearts</b>. If the horde reaches you, you lose a heart.</li>
        </ol>
        <div class="row" style="margin-top:8px">
          <label class="pill">Start Time: <input id="timeStart" type="number" min="20" max="120" value="60" style="width:64px;margin-left:6px;background:transparent;border:none;color:#e4ffef"></label>
          <label class="pill">Chips: <input id="choiceCount" type="number" min="4" max="12" value="8" style="width:54px;margin-left:6px;background:transparent;border:none;color:#e4ffef"></label>
        </div>
        <div class="row" style="margin-top:8px">
          <button id="btnReset" class="bad">Reset Run</button>
          <button id="btnExport" class="pill" title="Export current bank as CSV">Export Bank</button>
        </div>
        <div class="small muted" style="margin-top:6px">Shortcuts: <code class="kbd">Enter</code> = Check, <code class="kbd">N</code> = New.</div>
      </aside>
    </div>

    <footer class="small">Single‚Äëfile ‚Äî save as <code>index.html</code> on GitHub Pages. Works offline.</footer>
  </div>

  <script>
    /*****************************************
     * ZOMBIE SURVIVAL ‚Äì Build‚Äëa‚ÄëWord
     *****************************************/
    const HS_KEY='hs_zombie_build_v2';

    const BANK = [
      // EASY
      {parts:['bio','logy'], meaning:'study of life', hint:'root + suffix', accept:['biology'], diff:'easy'},
      {parts:['geo','logy'], meaning:'study of earth', hint:'root + suffix', accept:['geology'], diff:'easy'},
      {parts:['photo','graph'], meaning:'picture made with light', hint:'root + root', accept:['photograph'], diff:'easy'},
      {parts:['tele','graph'], meaning:'writing from far away', hint:'prefix + root', accept:['telegraph'], diff:'easy'},
      {parts:['micro','scope'], meaning:'device to see small things', hint:'prefix + root', accept:['microscope'], diff:'easy'},
      {parts:['trans','port'], meaning:'carry across', hint:'prefix + root', accept:['transport'], diff:'easy'},
      {parts:['port','able'], meaning:'able to be carried', hint:'root + suffix', accept:['portable'], diff:'easy'},
      {parts:['aud','ible'], meaning:'able to be heard', hint:'root + suffix', accept:['audible'], diff:'easy'},
      {parts:['vis','ible'], meaning:'able to be seen', hint:'root + suffix', accept:['visible'], diff:'easy'},
      {parts:['re','write'], meaning:'write again', hint:'prefix + root', accept:['rewrite'], diff:'easy'},
      {parts:['un','fair'], meaning:'not fair', hint:'prefix + root', accept:['unfair'], diff:'easy'},
      {parts:['anti','freeze'], meaning:'against freezing', hint:'prefix + root', accept:['antifreeze'], diff:'easy'},
      {parts:['dis','connect'], meaning:'separate; not connect', hint:'prefix + root', accept:['disconnect'], diff:'easy'},
      {parts:['non','sense'], meaning:'not making sense', hint:'prefix + root', accept:['nonsense'], diff:'easy'},
      {parts:['pre','view'], meaning:'see before', hint:'prefix + root', accept:['preview'], diff:'easy'},
      {parts:['photo','copy'], meaning:'copy using light', hint:'root + root', accept:['photocopy'], diff:'easy'},
      {parts:['sub','way'], meaning:'underground path', hint:'prefix + root', accept:['subway'], diff:'easy'},

      // MEDIUM
      {parts:['inter','act'], meaning:'act between or with others', hint:'prefix + root', accept:['interact'], diff:'medium'},
      {parts:['sub','marine'], meaning:'under water', hint:'prefix + root', accept:['submarine'], diff:'medium'},
      {parts:['super','human'], meaning:'beyond human', hint:'prefix + root', accept:['superhuman'], diff:'medium'},
      {parts:['rupt','ure'], meaning:'the act of breaking', hint:'root + suffix', accept:['rupture'], diff:'medium'},
      {parts:['dict','ion'], meaning:'manner of speaking', hint:'root + suffix', accept:['diction'], diff:'medium'},
      {parts:['cred','ible'], meaning:'believable', hint:'root + suffix', accept:['credible'], diff:'medium'},
      {parts:['chrono','logy'], meaning:'order of time', hint:'root + suffix', accept:['chronology'], diff:'medium'},
      {parts:['meter','stick'], meaning:'tool used to measure', hint:'root + root', accept:['meterstick','meter-stick'], diff:'medium'},
      {parts:['scrib','er'], meaning:'one who writes', hint:'root + suffix', accept:['scriber'], diff:'medium'},
      {parts:['spect','ator'], meaning:'one who watches', hint:'root + suffix', accept:['spectator'], diff:'medium'},
      {parts:['photo','synthesis'], meaning:'making with light', hint:'root + root', accept:['photosynthesis'], diff:'medium'},
      {parts:['auto','graph'], meaning:'self writing (signature)', hint:'prefix + root', accept:['autograph'], diff:'medium'},
      {parts:['tele','port'], meaning:'move far away instantly', hint:'prefix + root', accept:['teleport'], diff:'medium'},
      {parts:['micro','chip'], meaning:'small computer piece', hint:'prefix + root', accept:['microchip'], diff:'medium'},
      {parts:['terra','rium'], meaning:'earth container', hint:'root + suffix', accept:['terrarium'], diff:'medium'},
      {parts:['trans','mit'], meaning:'send across', hint:'prefix + root', accept:['transmit'], diff:'medium'},
      {parts:['inter','national'], meaning:'between nations', hint:'prefix + suffix', accept:['international'], diff:'medium'},
      {parts:['bio','graphy'], meaning:'writing about a life', hint:'root + suffix', accept:['biography'], diff:'medium'},
      {parts:['geo','graphy'], meaning:'study of the earth‚Äôs surface', hint:'root + suffix', accept:['geography'], diff:'medium'},
      {parts:['anti','virus'], meaning:'against a computer bug', hint:'prefix + root', accept:['antivirus'], diff:'medium'},
      {parts:['auto','pilot'], meaning:'self steering', hint:'prefix + root', accept:['autopilot'], diff:'medium'},

      // HARD
      {parts:['bene','fit'], meaning:'good result', hint:'root + suffix', accept:['benefit'], diff:'hard'},
      {parts:['mal','function'], meaning:'bad working', hint:'root + root', accept:['malfunction'], diff:'hard'},
      {parts:['hyper','active'], meaning:'excessively active', hint:'prefix + suffix', accept:['hyperactive'], diff:'hard'},
      {parts:['pseudo','science'], meaning:'false science', hint:'prefix + root', accept:['pseudoscience'], diff:'hard'},
      {parts:['poly','gon'], meaning:'shape with many angles', hint:'prefix + suffix', accept:['polygon'], diff:'hard'},
      {parts:['tact','ile'], meaning:'related to touch', hint:'root + suffix', accept:['tactile'], diff:'hard'},
      {parts:['therm','al'], meaning:'related to heat', hint:'root + suffix', accept:['thermal'], diff:'hard'},
      {parts:['mit','ten'], meaning:'(punny) something you send to your hand', hint:'root + suffix', accept:['mitten'], diff:'hard'},
      {parts:['macro','scope'], meaning:'device to see large things', hint:'prefix + root', accept:['macroscope'], diff:'hard'},
      {parts:['super','charge'], meaning:'power above normal', hint:'prefix + root', accept:['supercharge'], diff:'hard'},
      {parts:['inter','stellar'], meaning:'between stars', hint:'prefix + suffix', accept:['interstellar'], diff:'hard'},
      {parts:['chrono','meter'], meaning:'time measurer', hint:'root + root', accept:['chronometer'], diff:'hard'}
    ];

    // --- Utility & State ---
    const $ = s=>document.querySelector(s);
    const $$ = s=>Array.from(document.querySelectorAll(s));
    const shuffle = arr => arr.map(x=>[Math.random(),x]).sort((a,b)=>a[0]-b[0]).map(x=>x[1]);

    let hearts=3, score=0, solved=0, wave=1;
    let timeStart=60, timeLeft=60, timer=null;
    let choiceCount=8;
    let current=null;

    // Distance between horde and player (percent of track). 100 = far away, 0 = caught.
    let distance=60;

    // Shuffled decks per difficulty
    const DECK = { easy:[], medium:[], hard:[] };
    function difficultyForWave(){ return wave<=2? 'easy' : wave<=4? 'medium' : 'hard'; }
    function refillDeckFor(diff){ const idxs=BANK.map((b,i)=>[b.diff,i]).filter(([d])=>d===diff).map(([,i])=>i); DECK[diff]=shuffle(idxs); }
    function refillAllDecks(){ ['easy','medium','hard'].forEach(refillDeckFor); }
    function drawPuzzle(){ const diff=difficultyForWave(); if(!DECK[diff]||DECK[diff].length===0) refillDeckFor(diff); const idx=DECK[diff].shift(); return BANK[idx]; }

    function renderHearts(){ const box=$('#hearts'); box.innerHTML=''; for(let i=0;i<3;i++){ const d=document.createElement('div'); d.className='heart'+(i<hearts?'':' dead'); box.appendChild(d);} }
    function updateHUD(){ $('#score').textContent=score; $('#wave').textContent=wave; $('#best').textContent=localStorage.getItem(HS_KEY)||0; }

    // --- Chase visuals ---
    function renderChase(){
      const horde=$('#horde'); const label=$('#zLabel'); const dist=$('#distText');
      // Convert distance (0..100) to a horizontal transform of the horde group
      // Max travel ‚âà track width minus padding ~ we simulate with % translate.
      // At 100% distance, horde hugs the right. At 0%, it reaches the left (you).
      const pct = Math.max(0, Math.min(100, distance));
      const translatePct = 100 - pct; // 0 when far, 100 when caught -> move left
      horde.style.transform = `translateX(-${translatePct}%)`;
      label.style.transform = `translateX(-${translatePct}%)`;
      dist.textContent = `Distance: ${Math.round(pct)}%`;
    }

    function baseDrift(){ return 0.06 + (wave-1)*0.02; } // higher waves = faster approach
    function pushBack(amount){ distance = Math.min(100, distance + amount); renderChase(); }
    function surgeForward(amount){ distance = Math.max(0, distance - amount); renderChase(); if(distance<=0) loseHeart(); }

    function startTimer(){
      clearInterval(timer);
      const bar=$('#timebar');
      timeLeft=Math.max(20, timeStart - (wave-1)*5); const total=timeLeft;
      timer=setInterval(()=>{
        timeLeft-=0.1; bar.style.width=(100*timeLeft/total)+'%';
        surgeForward(baseDrift()); // constant slow chase forward
        if(timeLeft<=0){ clearInterval(timer); surge('‚è≥ Time ran out!'); }
      },100);
    }

    function layoutPuzzle(){
      current = drawPuzzle();
      $('#meaning').textContent='"'+current.meaning+'"';
      $('#hint').textContent=current.hint;
      const slots=$('#slots'), chips=$('#chips');
      slots.innerHTML=''; chips.innerHTML='';

      current.parts.forEach((p,i)=>{
        const s=document.createElement('div'); s.className='slot'; s.textContent='slot'; s.dataset.index=i;
        s.ondragover=e=>e.preventDefault();
        s.ondrop=e=>{ e.preventDefault(); const part=e.dataTransfer.getData('text'); s.textContent=part; s.classList.add('filled'); s.dataset.part=part; };
        slots.appendChild(s);
      });

      const allParts=BANK.flatMap(b=>b.parts);
      const distractors = shuffle(allParts).filter(x=>!current.parts.includes(x));
      const bank = shuffle(current.parts.concat(distractors.slice(0, Math.max(0, choiceCount-current.parts.length))));
      bank.forEach(p=>{ const c=document.createElement('div'); c.className='chip'; c.textContent=p; c.draggable=true; c.ondragstart=e=>e.dataTransfer.setData('text',p); chips.appendChild(c); });

      $('#toast').textContent='';
      startTimer();
    }

    function builtWord(){ return $$('#slots .slot').map(s=>s.dataset.part||'').join(''); }

    function check(){
      const slots=$$('#slots .slot');
      if(slots.some(s=>!s.dataset.part)){ toast('Fill all slots first.','warn'); return; }
      const guess=builtWord();
      const ok=(current.accept||[]).includes(guess);
      if(ok){
        const bonus=Math.max(0, Math.floor(timeLeft));
        solved++; score+=100+bonus; pushBack(12 + Math.min(18, bonus/4)); // bigger push if faster
        toast(`‚úÖ Correct! +100 (+${bonus})`,'good');
        if(solved%5===0){ wave++; toast(`üßü‚Äç‚ôÇÔ∏è Wave up! Now Wave ${wave}.`,'good'); }
        updateHUD(); layoutPuzzle();
      } else {
        surge('‚ùå Not quite ('+guess+').');
      }
    }

    function surge(msg){ toast(msg+' Horde surges!','bad'); surgeForward(25); if(distance>0) layoutPuzzle(); }

    function loseHeart(){
      hearts--; renderHearts();
      if(hearts<=0){ gameOver(); return; }
      distance=60; toast('üíî The horde caught up! You lost a heart.','warn'); layoutPuzzle();
    }

    function gameOver(){
      clearInterval(timer);
      const prev=+localStorage.getItem(HS_KEY)||0; if(score>prev) localStorage.setItem(HS_KEY,String(score));
      updateHUD();
      $('#chips').innerHTML=''; $('#slots').innerHTML='';
      $('#meaning').textContent='‚ÄúGame Over‚Äù'; $('#hint').textContent='Press Start to try again.';
      toast(`FINAL SCORE: ${score} ‚Ä¢ Best: ${localStorage.getItem(HS_KEY)||score}`,'warn');
    }

    function toast(t,kind){ const el=$('#toast'); el.textContent=t; el.style.color= kind==='good'? '#78ffb3' : kind==='bad'? '#ff9a9a' : '#ffd166'; }

    // Controls
    $('#btnStart').onclick=()=>{
      hearts=3; score=0; solved=0; wave=1; distance=60;
      renderHearts(); updateHUD(); refillAllDecks(); renderChase(); layoutPuzzle();
    };
    $('#btnNew').onclick=layoutPuzzle;
    $('#btnCheck').onclick=check;
    $('#btnReveal').onclick=()=>{ toast('üí° Answer: '+(current?.accept?.[0]||''),'warn'); };
    document.addEventListener('keydown',e=>{ if(e.key==='Enter') check(); if(e.key.toLowerCase()==='n') layoutPuzzle(); });

    // Settings
    $('#timeStart').oninput=e=>{ timeStart=Math.max(20, Math.min(120, +e.target.value||60)); };
    $('#choiceCount').oninput=e=>{ choiceCount=Math.max(4, Math.min(12, +e.target.value||8)); };
    $('#btnReset').onclick=()=>{ hearts=3; score=0; solved=0; wave=1; distance=60; renderHearts(); updateHUD(); refillAllDecks(); renderChase(); layoutPuzzle(); };

    // Export bank (CSV)
    $('#btnExport').onclick=()=>{
      const rows = BANK.map(b=>[...b.parts, b.meaning, b.hint, (b.accept||[])[0]||'', b.diff].join(','));
      const blob=new Blob([rows.join('\n')],{type:'text/csv'});
      const url=URL.createObjectURL(blob); const a=document.createElement('a'); a.href=url; a.download='word-parts-bank.csv'; a.click(); URL.revokeObjectURL(url);
    };

    // Init visuals
    renderHearts(); updateHUD(); renderChase();
  </script>
</body>
</html>
